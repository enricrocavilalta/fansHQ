<link rel="stylesheet" href="/styles.css">
<%- include('../partials/header') %>
<%- include('../partials/create_post') %>
<style>
  body {
  background-color: #000;
  color: #fff;
  font-family: sans-serif;
}

.post-grid-container {
  padding: 1rem;
  max-width: 1200px;
  margin: 0 auto;
}

.post-grid-container h2 {
  margin-bottom: 1rem;
}

.post-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
}

.post-card {
  background-color: #1e1e1e;
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  transition: background-color 0.2s ease;
}

.post-card:hover {
  background-color: #2a2a2a;
}

.post-card h3 {
  margin: 0 0 0.5rem;
  font-size: 1.1rem;
  color: #fff;
}

.post-card p {
  font-size: 0.9rem;
  color: #ccc;
  margin-bottom: 0.5rem;
}

.author-info {
  font-size: 0.8rem;
  color: #888;
}

.author-info a {
  color: #3fa9f5;
  text-decoration: none;
}

.author-info a:hover {
  text-decoration: underline;
}

.post-card[data-media="text"] {
  border-top: 4px solid hsl(240, 90%, 50%);
  background-color: hsl(240, 50%, 10%);
}
.post-card[data-media="image"] {
  border-top: 4px solid hsl(60, 90%, 50%);
  background-color: hsl(60, 50%, 10%);
}
.post-card[data-media="video"] {
  border-top: 4px solid hsl(0, 90%, 50%);
  background-color: hsl(0, 50%, 10%);
}
.post-card[data-media="audio"] {
  border-top: 4px solid hsl(120, 90%, 50%);
  background-color: hsl(120, 50%, 10%);
}
.post-card[data-media="link"] {
  border-top: 4px solid hsl(180, 90%, 50%);
  background-color: hsl(180, 50%, 10%);
}
.post-card[data-media="download"] {
  border-top: 4px solid hsl(300, 90%, 50%);
  background-color: hsl(300, 50%, 10%);
}
.post-card[data-media="poll"] {
  border-top: 4px solid hsl(270, 90%, 50%);
  background-color: hsl(270, 50%, 10%);
}
.post-card[data-media="product"] {
  border-top: 4px solid hsl(30, 90%, 50%);
  background-color: hsl(30, 50%, 10%);
}
.post-card[data-media="ama"] {
  border-top: 4px solid hsl(0, 0%, 100%);
  background-color: hsl(0, 0%, 10%);
}
.post-card[data-media="tipjar"] {
  border-top: 4px solid hsl(0, 0%, 50%);
  background-color: hsl(0, 0%, 5%);
}
</style>

<!-- Posts Grid -->
<section class="post-grid-container">
  <h2>Latest Posts</h2>

  <div class="post-grid">
    <% posts.forEach(post => { %>
      <div class="post-card" data-media="<%= post.media_type %>">
        <h3><%= post.title || 'Untitled' %></h3>
        <p><%= post.content ? post.content.slice(0, 100) : 'No content' %>...</p>
        <div class="author-info">
          By <a href="/author/<%= post.user_id %>">
            <%= post.email ? post.email.split('@')[0] : 'unknown' %>
          </a>
          Â· <%= new Date(post.created_at).toLocaleDateString() %>
        </div>
      </div>
    <% }); %>
  </div>
</section>
